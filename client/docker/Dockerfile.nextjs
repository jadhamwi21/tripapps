FROM node:20-alpine3.18

WORKDIR /app

COPY *.json ./

RUN npm ci

COPY ./ ./

COPY ./docker/launch.sh /

ARG BUILDTIME_API_URL
ARG NEXT_PUBLIC_API_URL

ENV BUILDTIME_API_URL=$BUILDTIME_API_URL
ENV NEXT_PUBLIC_API_URL=$NEXT_PUBLIC_API_URL

ENTRYPOINT ["sh", "/launch.sh"]
